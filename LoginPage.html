<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="signup_style.css">
    <title>Login</title>
  </head>
  <body>
    <div class="banner">
      <img class="pear" src="pairemLogoPearOnly.png">
      <img class="word" src="pairemLogoWord.png">
  </div>
    <div class="container">
      <div>

        <div class="center">
          <input class="field" id="userKey" type="text" placeholder="username" />
        </div>

        <div class="center">
          <input class="field" id= "passKey" type="text" placeholder="password" />
        </div>

        <div class="center">
          <button class="button" id="loginKey">Login</button>
        </div>
      </div>
      <div class="center">
        <a  class="button-small" href="signup.html">Sign Up</a>
        <a  class="button-small" href="FirstPage.html">Home</a>
      </div>
    </div>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCO3_sLIR5XeJcWiQ65I2scoeLibxWDCJs",
        authDomain: "pairemapp.firebaseapp.com",
        databaseURL: "https://pairemapp-default-rtdb.firebaseio.com",
        projectId: "pairemapp",
        storageBucket: "pairemapp.appspot.com",
        messagingSenderId: "54376945676",
        appId: "1:54376945676:web:e6b0bc5d80ff975b967629"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      import {getDatabase, ref, get, set, child, update, remove}
      from "https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";

      const database = getDatabase();
      var passKey = document.getElementById("passKey");
      var userKey = document.getElementById('userKey');
      var loginKey = document.getElementById("loginKey");

      function checkData(){
        const dbref = ref(database);

        get(child(dbref, "User/" + userKey.value))
        .then((snapshot)=>{
        if(snapshot.exists()){
          if(passKey.value == snapshot.val().password){
            location.href = "index.html";
          }else{
            alert("Password incorrect");
          }
        }else{
          alert("User not found");
        }
    });
  }

      loginKey.addEventListener('click',checkData);

    </script>
  </body>
</html>